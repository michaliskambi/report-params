# ----------------------------------------------------------------------------
# GitHub Actions workflow to build using FPC and package resulting binary.
# ----------------------------------------------------------------------------

name: Build

on: [push, pull_request]

defaults:
  run:
    shell: bash

jobs:
  build:
    name: Build
    strategy:
      matrix:
        runner: [windows-latest]
    runs-on: ${{ matrix.runner }}
    steps:
      - uses: actions/checkout@v4
      - name: test make before FPC
        run: make --version
      - name: test make before FPC 2
        run: which make
      - name: test MinGW make 1
        run: mingw32-make --version
      - name: Install FPC+Lazarus
        uses: gcarreno/setup-lazarus@v3.2.17
        with:
          lazarus-version: stable
      - name: test make
        run: make --version
      - name: test MinGW make 2
        run: mingw32-make --version
      # - name: test /bin/make
      #   run: /bin/make --version
      - name: PATH
        run: echo $PATH
      - name: See environment
        run: ls -R /mingw64/bin
      - name: See environment 2
        run: ls -R /c/mingw64/bin
